(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(8),i=a.n(s),o=(a(15),a(1)),c=a(2),l=a(4),m=a(3),u=a(6),d=a(5),h=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("nav",{className:"navbar navbar-dark bg-dark fixed-top"},n.a.createElement("h5",{className:"navbar-brand"},"Users"),n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link",href:"#",onClick:function(){return e.props.toggleForm()}},"Add user"))))}}]),t}(r.Component),p=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"card m-3"},n.a.createElement("div",{className:"card-header"},"#",this.props.id),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"card-text"},this.props.email)))}}]),t}(r.Component),f=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"d-flex justify-content-center mt-5"},n.a.createElement("div",{className:"spinner-border text-primary",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")))}}]),t}(r.Component),b=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8 offset-2 mt-3"},this.props.loading?n.a.createElement(f,{margin:!0}):this.props.users.length>0?this.props.users.map(function(e){return n.a.createElement(p,{key:e.id,id:e.id,email:e.email})}):n.a.createElement("p",null,"No users found"))))}}]),t}(r.Component),v=(a(16),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"UserFrom col-xs-4 ml-2 "+(this.props.isActive?"show":"hidden")},n.a.createElement("div",{className:"card shadow"},n.a.createElement("div",{className:"card-header"},"New User"),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:this.props.handleSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"userEmail"},"Email address"),n.a.createElement("input",{type:"email",className:"form-control",id:"userEmail",name:"email",placeholder:"Enter email"}),n.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"Type a valid email address.")),this.props.isLoading?n.a.createElement(f,null):n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),!!this.props.response&!this.props.isLoading?n.a.createElement("div",{role:"alert",className:"alert mt-3 "+(this.props.hasErrors?"alert-danger":"alert-success")},this.props.response):n.a.createElement("p",null))))}}]),t}(r.Component)),E={rest:{users:"http://localhost:8000/api/user/"}};function g(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),r=0;r<a.length;r++){var n=a[r].trim();if(n.substring(0,e.length+1)===e+"="){t=decodeURIComponent(n.substring(e.length+1));break}}return t}var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).toggleForm=a.toggleForm.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.state={loading:!1,formActive:!1,formLoading:!1,hasErrors:!1,formUser:{},formResponse:"",users:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.fetchUsers()}},{key:"toggleForm",value:function(){this.setState({formActive:!this.state.formActive})}},{key:"fetchUsers",value:function(){var e=this;this.setState({loading:!0}),fetch(E.rest.users).then(function(e){return e.json()}).then(function(t){var a;e.setState({loading:!1,users:(a=t,a.map(function(e){return{id:(t=e).id,email:t.email};var t}))})})}},{key:"createUser",value:function(e){var t=this;this.setState({formLoading:!0}),fetch(E.rest.users,{method:"POST",body:JSON.stringify({email:e.get("email")}),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":g("csrftoken")}}).then(function(e){if(!e.ok){e.json().then(function(e){t.setState({formLoading:!1,hasErrors:!0,formResponse:"Email: "+e.email[0]})}).catch(function(t){alert(e.statusText)});throw Error(e)}t.fetchUsers(),t.setState({formLoading:!1,hasErrors:!1,formResponse:"User created successfully"})})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData(e.target);t.get("id")||this.createUser(t)}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(h,{toggleForm:this.toggleForm}),n.a.createElement(v,{user:this.state.formUser,handleSubmit:this.handleSubmit,isActive:this.state.formActive,isLoading:this.state.formLoading,hasErrors:this.state.hasErrors,response:this.state.formResponse}),n.a.createElement(b,{loading:this.state.loading,users:this.state.users}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17);i.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.5e17d8e7.chunk.js.map